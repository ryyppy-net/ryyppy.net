<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="/static/js/jquery.js"></script>
        <script type="text/javascript" src="/static/js/jquery.tmpl.js"></script>
        
        <script type="text/javascript">
            $(document).ready(function() {
                var picker = new DateTimePicker('#drinkTime');
            });
            
            function DateTimePicker(element) {
                this.element = element;
                
                this.appendTemplate();
            }
            
            DateTimePicker.prototype.setCurrentTime = function() {
                var currentTime = new Date();
                
                $('#dateDay').val(currentTime.getDay());
                $('#dateMonth').val(currentTime.getMonth() + 1);
                $('#dateYear').val(currentTime.getFullYear());
                
                $('#dateHour').val(currentTime.getHours());
                $('#dateMinute').val(currentTime.getMinutes());
            }
            
            DateTimePicker.prototype.adjustWidths = function() {
                var widest = 0;
                $('#drinkTime td').each(function(index) {
                    widest = Math.max(widest, $(this).width());
                });

                $('#drinkTime td').width(widest);
            }
            
            DateTimePicker.prototype.appendTemplate = function() {
                var that = this;
                
                $.get('/static/templates/datetimepicker.html', function(template) {
                    $.tmpl(template, undefined).appendTo(that.element);
                    that.adjustWidths();
                    that.setCurrentTime();
                });                
            }
        </script>
        
        <style type="text/css">
            .datetimepicker td {
                text-align: center;
            }
            
            .datetimepicker input {
                font-size: 1.0em;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <div id="drinkTime"></div>
    </body>
</html>
